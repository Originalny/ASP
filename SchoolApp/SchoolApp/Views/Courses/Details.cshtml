@model SchoolApp.Models.Course
@{
    ViewData["Title"] = "Курс";
    Layout = "_Layout";
}
<h3 class="mb-1">@Model.Title</h3>
<div class="mb-3 text-muted">Преподаватель: @Model.Teacher?.Name</div>

<h5 class="mt-4">Студенты на курсе</h5>
@if (Model.Enrollments.Any())
{
    <ul class="list-group mb-3">
        @foreach (var e in Model.Enrollments)
        {
            <li class="list-group-item d-flex justify-content-between align-items-center">
                <span>@e.Student?.Name</span>
                <form asp-action="RemoveStudent" method="post" class="m-0">
                    <input type="hidden" name="courseId" value="@Model.Id" />
                    <input type="hidden" name="studentId" value="@e.StudentId" />
                    <button class="btn btn-sm btn-outline-danger">Исключить</button>
                </form>
            </li>
        }
    </ul>
}
else
{
    <div class="alert alert-info">Пока нет студентов.</div>
}

<h5 class="mt-4">Добавить студента</h5>
<form asp-action="AddStudent" method="post" class="row g-2">
    <input type="hidden" name="CourseId" value="@Model.Id" />
    <div class="col-md-6">
        <select class="form-select" name="StudentId">
            @foreach (var s in (IEnumerable<SchoolApp.Models.Student>)ViewBag.FreeStudents)
            {
                <option value="@s.Id">@s.Name (@s.Email)</option>
            }
        </select>
    </div>
    <div class="col-md-3">
        <input type="date" class="form-control" name="EnrollmentDate" value="@DateTime.Today.ToString("yyyy-MM-dd")" />
    </div>
    <div class="col-md-3">
        <button class="btn btn-success w-100">Добавить</button>
    </div>
</form>
